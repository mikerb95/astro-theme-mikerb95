---
import { getCollection } from 'astro:content';
import Note from '../../layouts/Note.astro';

export async function getStaticPaths() {
  const notes = (await getCollection('notes')).filter((n)=> !n.data.draft);
  return notes.map((n)=> ({ params: { slug: n.slug.split('/') }, props: { entry: n } }));
}

const { entry } = Astro.props as any;
const { Content } = await entry.render();
---
<Note title={entry.data.title} description={entry.data.description} tags={entry.data.tags} updated={entry.data.updated}>
  <Content />
</Note>
